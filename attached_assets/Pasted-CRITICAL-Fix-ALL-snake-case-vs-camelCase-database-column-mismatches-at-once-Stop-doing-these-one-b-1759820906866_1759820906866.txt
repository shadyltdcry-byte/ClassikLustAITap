CRITICAL: Fix ALL snake_case vs camelCase database column mismatches at once. Stop doing these one-by-one.
DATABASE SCHEMA ISSUES:
ALL columns need proper snake_case ↔ camelCase mapping in SupabaseStorage.ts:
avatarUrl → avatar_url
animationSequence → animation_sequence
isNsfw → is_nsfw
isVip → is_vip
isEvent → is_event
And ANY other camelCase columns being used in code
Create a universal mapper function that handles this conversion for ALL database operations (read AND write) so we stop getting PGRST204 errors every 5 minutes.
CHARACTER GALLERY ISSUES:
Avatar tap functionality is WRONG: The main avatar image opens the character gallery, but it should just be for viewing/chatting with the current character. Move the gallery open function to a dedicated button/menu item instead.
Gallery doesn't display character images: When the gallery opens, character photos aren't showing. Fix the image loading/path resolution.
Gallery UI needs adjustments: Layout is off, needs better spacing/formatting.
CHARACTER EDITING/SAVING ERROR:
When trying to save/edit characters in the admin panel, it's throwing errors. Likely another snake_case/camelCase mismatch or missing column mapping.
Check the character creation/update endpoints - they need to send snake_case to the database.
UPGRADES SECTION:
Something's broken with the upgrades functionality - errors when interacting with it. Debug and fix whatever's causing failures there.
WEIRD TABLE ISSUES:
There's some table (probably characters or media_files) that has formatting/structure problems. Check the schema and make sure all expected columns exist with correct data types.
FLOATING HEARTS TAP ANIMATION:
Verify this didn't get removed during recent changes. Should still trigger when tapping screen areas (not conflicting with avatar or other buttons).
PRIORITY ORDER:
Fix snake_case/camelCase mapping EVERYWHERE first (this is causing 90% of errors)
Move gallery open function off the main avatar
Fix character editing/saving
Fix gallery image display
Debug upgrades section
Verify floating hearts still work
DO NOT:
Make piecemeal fixes to individual columns
Create database views or aliases (just fix the code mapping)
Change working features unnecessarily
Touch the database schema directly